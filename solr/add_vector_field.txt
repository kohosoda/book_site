# ベクトル検索用にフィールドタイプの追加（次元を指定）
curl -X POST -H 'Content-Type: application/json' \
  --data '{
    "add-field-type": {
      "name": "vector",
      "class": "solr.DenseVectorField",
      "vectorDimension": 768,
      "similarityFunction": "cosine"
    }
  }' http://localhost:8983/solr/books/schema

# ベクトル検索用にフィールドの追加
curl -X POST -H 'Content-Type: application/json' \
  --data '{
    "add-field": {
      "name": "description_vector",
      "type": "vector",
      "indexed": true,
      "stored": true
    }
  }' http://localhost:8983/solr/books/schema


# ベクトル検索のテスト
curl -X POST "http://localhost:8983/solr/books/select" \
     -H "Content-Type: application/json" \
     -d '{
           "query": "{!knn f=description_vector topK=5}[-0.22977242, 0.23349357, 0.5958073, 0.17240973, -0.14479907, 0.2769769, 0.68776447, -0.5807879, 0.13039467, 0.44714636, -1.0696232, 0.54855764, -0.24432226, -0.5698264, -1.0510132, 0.45371732, 0.6525716, -0.9945473, -0.10805879, -0.24020882, -0.32205176, -0.80056936, 0.72588617, 0.15160716, -0.17345221, 0.3479303, -0.387138, 0.56215835, -0.002987415, 0.48180276, -0.3291722, -0.10421086, -0.19610107, -0.27223563, -0.42916033, 0.14117584, 1.5182723, 0.5897044, 0.10525796, 0.39744115, -0.6026423, 0.40686682, -0.2371626, 0.8615788, 0.7497745, -0.29044148, 0.3381482, -0.8712608, 0.692484, 0.49116927, -0.5917379, 1.2179598, 0.04278516, -0.29520833, -0.16494794, -0.6559775, 0.43899202, -0.51614034, -0.7533618, 0.2616341, -0.9963388, 0.06955077, -0.21625793, -0.16622052, -0.67090595, 0.26175827, -0.08987634, -0.35734305, -0.19656251, -0.40078482, 0.10776084, -0.7090029, -0.42497495, 0.4370807, -0.13009568, -0.3217662, -0.37040854, -0.15206209, 0.43250474, 0.6209364, -0.3548457, -0.059840225, 0.04158837, -0.0936588, 0.29095626, -0.2607123, 0.71888256, 0.64696664, -0.26325038, 0.16415516, 0.05467945, 0.6239064, 0.627539, -0.32435882, -0.15485969, -0.48410732, 0.21169825, 0.4468324, 0.015063719, 0.32123125, -0.50401473, 0.3888682, -0.6582695, -1.2549931, 0.21932788, -0.111046284, 1.0865642, 0.33739027, -1.1758118, 1.1066576, -0.10985489, -0.026837872, 0.4354018, 0.15050258, -0.21056162, -0.17876187, -0.75124913, 0.05502543, 0.4378591, -0.22464834, 0.41736996, -0.18375409, -0.56919855, -0.16946937, -0.26039308, 0.448353, -0.31964958, -0.18082984, 1.217571, -0.37649563, 0.024213059, -0.042735144, 0.42962125, -0.10346853, -0.47385025, 0.5507261, -0.39221787, -0.39263314, -0.39343444, 0.62178653, 0.29390925, 0.013926815, -0.083440535, 0.072604015, 0.17522426, -0.6074027, 0.14425215, -0.2764827, 0.0694537, 0.4369524, -0.4178788, 0.026625043, -0.76443225, 0.07390824, -0.27800655, -0.41463354, 0.05507249, -0.91203886, -0.3661196, -0.23655161, -0.1415396, -0.15511529, -0.77923584, 0.78784865, 0.42102215, -0.20399281, 0.2926433, -0.23904335, 0.23048075, 0.23420471, -0.17457442, 0.4411439, 0.40011534, 0.3848012, -0.12891607, 0.5320262, 1.3326095, -0.72925895, -0.50620246, -0.2682107, 0.22895221, -0.100327395, -0.38321456, 1.184283, 0.5412985, -0.6037805, 0.0737683, -0.6714122, -0.24522637, -0.1440488, -0.5632766, -0.08683466, 1.0199099, 0.24496947, -0.2090278, 0.10684962, -0.37842566, 0.39835677, 0.41552708, 0.91138244, 0.0673647, -0.15904191, -1.0152947, -0.33693922, -0.51563793, -0.044035085, 0.26062423, -0.26996514, -0.44017828, -0.79392767, 0.2471814, 0.10289916, -0.79572886, 0.059314128, 0.094569124, 0.07301444, -0.09993349, -0.7145181, 0.496861, 0.64588493, 1.0856094, -0.17641793, 0.24189062, 0.20906188, 0.16312711, 0.048208404, 0.51765585, 0.12504879, 0.19691417, -0.13372654, -0.2953437, 0.26438722, -0.3049675, -0.001312484, 0.367562, -0.2965423, -0.62397075, 0.40858918, 0.2999248, -0.658255, 0.01747587, 0.62492466, 0.24899442, 0.3300316, 0.5945937, -0.21952863, 0.24162576, 0.051558863, -0.5764389, 0.66413116, -1.3099706, 0.6400595, 0.1940397, -0.08844238, -0.8510055, 0.5697427, 0.08916652, 0.031419374, -1.1754967, 0.1374281, -0.4311111, -0.13141821, -0.77610666, 0.42893714, 0.95587176, -0.27593902, 0.5168812, -0.31609288, -0.5524143, -0.15881844, -0.43207926, -0.40554935, -0.30567873, 0.37653455, -0.2824611, -0.58906233, -0.166056, -0.4045075, 0.5214978, 0.9529478, -0.12321812, 1.2197165, 0.40772635, 0.7413076, 0.038073767, 0.21871501, -0.049533807, 0.5889387, -0.8454488, -0.38927925, -0.90467846, -0.5406444, -0.40331358, 0.3012001, 0.44514087, -0.74880433, 0.004629175, 0.7981226, 0.020208595, -0.30749264, 0.06021018, 0.12515628, -0.37684295, 0.42280477, -0.29039052, -0.22522853, 0.2721745, -0.023330998, 0.2107257, -1.0543697, 0.14726914, -0.3863752, -0.4750496, 0.6637629, 0.049505185, -0.5671862, 0.54911935, -0.42401344, 0.016854813, 0.1623012, 0.6344742, 0.72888094, -0.07361542, -0.12089857, 0.20830545, 0.7279624, 0.1700284, -0.70473075, 0.3194436, -0.38489988, 0.14399083, 0.027813457, -0.57952213, -0.11500577, 0.30353114, 0.30093938, -0.60488963, 0.29234552, -0.17085598, -0.060320783, -0.09153037, 0.21296729, -0.6581444, 0.2631855, -0.06078694, -0.54187256, 0.4860524, 0.6114091, -0.061151143, 0.6056726, -0.147406, -0.32825053, -0.3183755, 0.5709355, -0.6083336, -0.5480469, 0.2765932, 0.53399384, -0.51495075, -0.14135641, 0.25662398, 0.3858288, -0.27342707, -0.36036795, 0.69718623, -0.4434236, -0.5374108, 0.026741508, -0.111360505, 0.21929054, -0.10654355, -0.3815766, -0.5080494, -0.44474563, -0.0885105, 0.48270786, 0.10967278, -0.18668276, -0.2417801, 0.28926143, -0.36924952, 0.06637395, 0.41969502, -0.87914234, -0.07127151, 0.059980087, 0.5523775, 0.3655886, 0.64605385, 1.0217957, -0.26638114, -0.5636379, -0.42087328, -0.5111455, 0.5459629, -0.31540793, -0.24226138, 0.38381544, -0.24303958, -0.07946861, 0.4259693, 0.3612196, 0.7170439, -0.00013362944, 0.121077016, -0.05891413, 0.4412729, -0.53590626, -0.061604198, -0.96056205, 0.72851115, -0.1139751, -0.39962408, 0.78815794, 0.03222611, -0.1083055, -0.16344866, -0.062350307, -0.28079432, -0.24642915, -0.23235172, 0.5673483, -0.12612823, -0.16565591, 0.059517007, 0.8436345, -0.1434947, -0.75921834, -0.5238468, -0.2946774, 0.39396057, 0.49074063, -0.6496186, 0.25293693, -0.33840483, 0.20940441, 0.41019937, 0.055176158, 0.7873153, 0.2505029, 0.19613847, -0.8238421, 0.058671053, -0.087791495, 0.08266307, 0.569082, -0.18333308, 0.24877585, -0.44376534, 0.36922187, -0.00463989, -0.46545103, 0.20452388, -0.042845663, -0.040520642, 0.8018087, 0.6472228, -0.24912123, -0.9742264, 0.20528273, -0.009195127, 0.2072585, -0.7966762, -0.6020742, -0.45408022, 0.19193852, -0.40554082, -0.54819685, -0.14507066, -0.5915817, -0.22443034, -0.333894, -0.27235878, -0.19722538, 0.13154587, -0.9032627, -0.96077555, -0.13479468, -0.041182205, 0.35310748, 0.18055843, -0.20549937, 0.24599832, -0.95299816, 0.32435966, -0.98893017, 0.09383657, 0.85004437, -0.27248994, -0.14298679, 0.45252177, 0.5621822, -0.66043115, -0.6840304, 0.30600938, -0.5786552, 0.17743327, -0.4484659, 0.3688203, -0.2790069, 1.0584316, 0.6660848, 0.39134118, 0.8700033, 1.1663764, 0.3396208, -0.22106098, 0.20450996, -0.30636698, -0.37350592, 0.098929554, -0.3339329, 0.2027597, 0.20509697, 0.6147347, -0.87438416, 0.003048148, -0.25000528, -0.31061167, 0.94839895, -1.1359669, -0.10061331, -0.16546135, -1.3230642, 0.5995097, 0.14221802, -0.6761814, 0.05849841, -0.4644542, 0.35056272, -0.43183497, 0.4204098, -0.24450283, -0.4443484, 0.33666417, 0.14682537, 0.4465702, 0.40350282, 0.43772808, -1.0106914, -0.028526222, -0.27857336, 0.08634787, 0.03600631, -0.35102996, 0.14039977, 0.16840011, -0.1419293, -1.3339714, 0.121705785, 0.20684904, 0.42116186, -0.34591812, -0.6351942, -0.6794231, -0.9045752, -0.11845457, -0.8032532, -0.10382422, 0.79693043, 0.2698561, 0.7721092, 0.26236093, -0.3849706, -0.04650541, -1.3356979, -0.08747324, -0.397913, -0.07723043, -0.28249222, 0.12996766, 0.1724202, -0.18352282, 0.38864222, -0.15706031, -0.5144254, 0.20029387, -0.14105321, -0.17055807, 0.58702826, -0.19502895, -0.03781097, -0.28807557, -0.3674926, 0.29382512, -1.1502413, 0.7181136, 0.6663923, 0.13869496, -0.2643448, -0.9785069, 0.30510008, 0.48053822, -0.6764448, 1.3328457, -0.22707263, 0.11502418, 0.14434882, 0.20349602, -0.450474, -0.27571198, -0.6486787, -0.4175205, 0.22558303, -0.26759446, -0.038186643, -0.771906, 0.29617137, -0.5798975, 0.053839542, 0.50459075, 0.21928264, 0.12163674, 0.43252623, -0.5179761, -0.3904091, -1.3316607, -0.44788268, -0.737011, 0.85469186, 0.17555617, -0.22780989, -0.29652864, -0.4771901, 0.438145, -0.43587315, -0.5509827, -0.24565938, 0.33656684, 0.18354756, 0.01841051, 0.33363786, 0.50000364, -0.25050837, 0.35464913, -0.04994425, -0.13893734, 0.8593509, 0.191591, 0.26888695, -0.04581083, 0.024469117, -0.18011409, 0.18372968, 0.006662624, -0.27990875, 0.062048975, -0.21044892, 0.11715849, 0.3185067, 0.8162272, 1.0198505, 0.23761944, 0.5039884, 0.6817814, -0.08612477, -0.014891215, -0.4395928, -0.11133554, 0.019967789, 0.0054057827, 0.25317284, 0.7535874, -0.21984288, 0.23720758, 1.095955, 0.8577419, 0.08345346, 0.3558299, -1.1043873, 0.40443382, 0.0532112, -0.8393025, -0.54844546, -0.105074495, 0.014891455, 0.48866156, -0.41442782, -0.21342853, -0.45869532, -0.55580986, -0.022460569, -0.60788256, -0.012655268, 0.54908603, 0.6457243, -0.0971714, 0.25064144, 0.3735158, 1.225526, 0.43090782, -0.42938742, -0.9891643, 0.64667296, 0.3541809, -1.2785642, 0.22124739, -0.29048452, -0.97890586, 0.34325758, -0.53868484, 0.9709215, 0.07207011, 0.8295638, -0.8586202, -0.45745566, -0.035071258, 0.24006054, 0.59538054, -0.7782398, -0.22504164, 1.0369139, -0.46162897, -0.4032698, 0.39479083, 0.3037279, -0.10056067, -0.40329704, -0.35997093, 1.0448623, 0.7664751, -0.10497953, -0.41122508, -0.2404139, -0.05288237, 0.041482843, 0.83776426, -0.12432873, 0.40584832, 0.045199662, 0.79007673, -0.70845664, -0.2814855, -0.029295186, 0.08174505, -0.15251765, -0.22963917, -0.23957062, 0.31190434, -0.3021234, 0.6509733, 0.72357416, -0.20264147, -0.44121814, 0.37512636, -0.06872775, 0.20825757, -0.4730246, 0.19007057, 0.3225397, -0.18395735, -0.09181011, 0.0034556065, 0.5934297, 0.060403526, -0.45293725, 0.36996487, -0.42945555, 0.13894652, 0.7534531, -0.59111905, -2.0991073, -0.9080943, 0.061729282, 0.42716086, -0.27797145, -0.8018162, -0.020525616]",
           "fields": ["id"]
         }'
